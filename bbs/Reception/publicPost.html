<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Lei Shi">
		<meta http-equiv="Cache-Control" content="o-transform">
		<meta http-equiv="Cache-Control" content="no-siteapp">
		<title>发表新帖 - 智慧教育平台</title>

		<link rel="shortcut icon" href="favicon.ico">
		<link rel="stylesheet" href="../static/font-awesome//4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="../static/highlight.js/9.8.0/monokai-sublime.min.css">
		<link rel="stylesheet" href="../app/css/libs/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" href="../app/css/libs/katex/0.6.0/katex.min.css">
		<link rel="stylesheet" href="../app/css/libs/videojs/5.11.7/video-js.min.css">
		<link rel="stylesheet" href="../app/css/dest/styles.css?=2016121272249">
		
		<link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css">
		<link rel="stylesheet" type="text/css" href="../css/muke.css">
		<link rel="stylesheet" type="text/css" href="../layui/css/layui.css" />
		<script src="../layui/layui.js"></script>
		<script src="../js/jquery.min.js"></script>
		<script src="../js/vue.min.js"></script>
		<script src="../js/axios.js"></script>
		<script src="../js/index.js"></script>

		<style>

			/* modal 模态框*/
        #invite-user .modal-body {
            overflow: hidden;
        }
		#invite-user .modal-body .form-label {
			margin-bottom: 16px;
			font-size:14px;
		}
		#invite-user .modal-body .form-invite {
			width: 80%;
			padding: 6px 12px;
			background-color: #eeeeee;
			border: 1px solid #cccccc;
			border-radius: 5px;
			float: left;
			margin-right: 10px;
		}
		#invite-user .modal-body .msg-modal-style {
			background-color: #7dd383;
			margin-top: 10px;
			padding: 6px 0;
			text-align: center;
			width: 100%;
		}
		#invite-user .modal-body .modal-flash {
			position: absolute;
			top: 53px;
			right: 74px;
			z-index: 999;
		}
		/* end modal */

        .en-footer {
            padding: 30px;
            text-align: center;
            font-size: 14px;
        }
    </style>
		<script type="text/javascript">
			layui.use('layedit', function() {
				var layedit = layui.layedit,
					$ = layui.jquery;
				var index = layedit.build('demo'); //建立编辑器

				var postContent;
				var active = {
					content: function() {
						postContent = layedit.getContent(index);
						alert(layedit.getContent(index)); //获取编辑器内容
					},
					text: function() {
						alert(layedit.getText(index)); //获取编辑器纯文本内容
					},
					selection: function() {
						alert(layedit.getSelection(index));
					}
				};

				$("#btn_public").on('click', function() {
					var type = $(this).data('type');
					active[type] ? active[type].call(this) : '';
					
					var postTitle=$("#postTitle").val();
					alert(postContent+" "+postTitle);
					
					if (postContent == "" || postTitle == "") {
						layer.msg("请完善帖子信息", {
							icon: 7,
							time: 1000,
						});
					} else {
						
						$.ajax({
							url: '/api/bbs/post/insertPost',
							type: 'post',
							data: {
								content: postContent,
								title: postTitle,
								userId: "9357593e-02dc-47ab-b304-910e3411a897"
							},
							beforeSend: function(request) {
								// 禁用按钮防止重复提交
								$("#btn_public").attr({
									disabled: "disabled"
								});
								//设置请求头
								//request.setRequestHeader("BBG-Key", "ab9ef204-3253-49d4-b229-3cc2383480a6");
							},
							success: function(data) {
								if (data.success) {
									layer.msg(data.message, {
										icon: 6, //成功的表情 
										time: 1000, //1秒关闭（如果不配置，默认是3秒） 
									}, function() {
										window.location.href="post.html";
									});

								} else {
									layer.msg(data.message, {
										icon: 5,
										time: 1000,
									});
									return;
								}
							},

						});
					}
				})

			});
		</script>


	</head>

	<body>


		<!-- 顶部 -->
				<div class="width100 float_l" style="margin-top: -70px;">
					<div class="width100 float_l height80 line_hei80">
		
						<!-- 顶部左边 -->
						<div class="float_l">
							<div class="float_l margin_l20">
								<a href="#"><img src="../img/uiz1.png"></a>
							</div>
							<div class="float_l">
								<ul class="ul_li fon_siz16">
									<li><a class="color_black" href="../courses/index.html">课程</a></li>
									<li><a class="color_black" href="">院系</a></li>
									<li><a class="color_black" href="">名师专栏</a></li>
		
								</ul>
							</div>
						</div>
		
						<!-- 顶部右边 -->
						<div class="float_r">
							<div class="float_l top_input">
								<input class="posi_relative" type="text" name="" id="" placeholder="请输入想搜索的内容...">
								<img class="img_sousuo bianshou" src="../img/uiz4.png">
							</div>
							<div class="float_l margin_l20">
								<img src="../img/uiz5.png">
							</div>
							<div class="float_l margin_l35">
								<img src="../img/uiz6.png">
							</div>
							<div class="float_l margin_l30 margin_r40">
								<a class="btn btn-default navbar-btn sign-in" data-sign="signin" href="#sign-modal" data-toggle="modal">登录</a>
								<a class="btn btn-default navbar-btn sign-up" data-sign="signup" href="#sign-modal" data-toggle="modal">注册</a>
							</div>
						</div>
		
					</div>
				</div>



		<div class="container layout layout-margin-top">

			<ol class="breadcrumb">
				<li><a href="post.html">讨论区</a></li>
				<li><a href="#">发表新帖</a></li>
			</ol>

			<div class="row">
				<div class="col-md-9 layout-body">

					<div class="content question-detail">

						<label class="layui-form-label">标题</label>
						<br />
						<br />
						<input type="text" id="postTitle" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off"
						 class="layui-input">
						</input>

						<label class="layui-form-label">内容</label>
						<br />
						<br />
						<div class="your-answer words-ctrl">
							<textarea id="demo" id="public"></textarea>
							<br />
							<button class="layui-btn" data-type="content" id="btn_public">发表新帖</button>
						</div>
					</div>

				</div>
				<div class="col-md-3 layout-side">

					<div class="side-image">
						<a href="#" target="_blank">
							<!-- 用户头像 -->
							<img src="#" />
							<!-- 用户昵称 -->
							<a href="#">用户昵称</a>
						</a>
					</div>

				</div>
			</div>

		</div>


		<!-- 页脚 -->
		<div class="width100 float_l padding_t30 height193">
			<div class="width_1200 margin_auto">
				<div class="width100 float_l text_c margin_b30">
					<a class="img_backg5" href="#"></a>
					<a class="img_backg6 posi_relative wexinmaxianshi" href="#"><i class="weixinweima dis_none"><img src="img/idx-btm.png"></i></a>
					<a class="img_backg7" href="#"></a>
					<a class="img_backg8" href="#"></a>
				</div>
				<div class="width100 float_l text_c yejiao color_gray">
					<a>关于我们</a>
					<a>企业合作</a>
					<a>人才招聘</a>
					<a>讲师招募</a>
					<a>联系我们</a>
					<a>意见反馈</a>
					<a>友情链接</a>
				</div>
				<div class="width100 float_l text_c border_t margin_t20 padding_t20 color_gray fon_siz12">
					<span>© 2016 imoroc.com 京ICP备13042132号</span>
				</div>
			</div>
		</div>


	</body>
</html>
