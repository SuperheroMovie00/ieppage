<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="js/elementui/index.css">
    <script src="js/vue.js"></script>
    <script  src="js/elementui/index.js"></script>
    <script src="js/axios.min.js"></script>
    <link rel="stylesheet" href="css/tea.css">

</head>

<body>
<div id="app">
    <el-container>
        <el-header>
            <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" @select="handleSelect">
                <el-menu-item index="1">处理中心</el-menu-item>
                <el-menu-item index="2">工作台</el-menu-item>
                <el-menu-item index="3">工作台</el-menu-item>
                <el-menu-item index="4">工作台</el-menu-item>
                </el-submenu>
              </el-menu>
        </el-header>
        <el-container>
            <el-aside width="200px">
                <el-tree
                        node-key="id"
                        :default-expanded-keys="[4]"
                        :data="menuData"
                        :props="menuProps"
                        @node-click="menuClick"
                ></el-tree>
            </el-aside>
            <el-main>
            <!--    <div>
                    <el-input v-model="cour_name"></el-input>
                    <el-button type="success" @click="search">搜索sss</el-button>

                </div>
                <el-table :data="tableData" style="width: 100%">
                    <el-table-column
                            type="index"
                            width="50">
                    </el-table-column>

                    <el-table-column prop="courName" label="阅览室">
                    </el-table-column>

                    <el-table-column prop="courContent" label="卡号">
                    </el-table-column>

                    <el-table-column prop="courDetails" label="名称">
                    </el-table-column>

                    <el-table-column prop="courIsputaway" label="进入时间">
                    </el-table-column>

                    <el-table-column prop="courNocount" label="离开时间">
                    </el-table-column>

                    <el-table-column prop="courPageview" label="离开时间">
                    </el-table-column>
                </el-table>
                <div style="display: flex;justify-content: center">
                    <el-pagination
                            layout="prev, pager, next"
                            :total="total" current-page.sync="page" @current-change="pageChange">
                    </el-pagination>
                </div>-->

            </el-main>
        </el-container>
    </el-container>
</div>

</body>
<script>
    axios.defaults.headers.common['Authorization'] = "bearer " + sessionStorage.getItem("access_token");

    var Main = {
        data() {
            return {
                //菜单数据
                menuData: [],
                //菜单配置
                menuProps: {
                    children: 'children',
                    label: 'name'
                },

                tableData: [],
                cour_name: "",
                page: 1,
                pageSize: 10,
                total: 0,
                activeIndex: '1',
                activeIndex2: '1'
            }
        },
        methods: {
            menuClick(data, node, target) {

            },
            pageChange(page) {
                this.page = page;
                this.queryCourse();
            },
            handleSelect(key, keyPath) {
                console.log(key, keyPath);
            },
            handleClose(key, keyPath) {
                console.log(key, keyPath);
            },
            handleOpen(key, keyPath) {
                console.log(key, keyPath);
            },
            search() {
                this.page = 1;
                this.queryCourse();
            },

            queryCourse() {
                axios({
                    method: 'get',
                    url: '/api/teacher/course/getPaginate',
                    params: {
                        page: this.page,
                        pageSize: this.pageSize,
                        courName: this.cour_name
                    }
                })
                    .then(res => {
                            let data = res.data;

                            this.total = data.totalElements;
                            this.tableData = data.content;
                        }
                    )

            },
            queryMenu() {
                axios({
                    method: "get",
                    url: "/api/teacher/course/getMenu"
                }).then(res => {
                    res=res.data;
                    this.menuData=res.message;
                })
            }
        },
        mounted() {
            // 初始化数据
            this.queryCourse();
            //初始化菜单
            this.queryMenu();
        }
    }

    var Component = Vue.extend(Main)
    new Component().$mount('#app')
</script>

</html>
